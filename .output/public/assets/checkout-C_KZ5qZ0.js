import{r as y,j as e,P as S,c as k,u as _,a as D,b as I,S as P,G as N,U as F,M as O,t as x,o as T}from"./main-DRxoYVQ_.js";import{u as z,L as u,I as B}from"./useForm-CFfGqZw2.js";import{C as b,a as $}from"./clock-hbaKcCcr.js";var E="Separator",f="horizontal",L=["horizontal","vertical"],w=y.forwardRef((l,o)=>{const{decorative:t,orientation:i=f,...n}=l,c=A(i)?i:f,r=t?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return e.jsx(S.div,{"data-orientation":c,...r,...n,ref:o})});w.displayName=E;function A(l){return L.includes(l)}var M=w;function R({className:l,orientation:o="horizontal",decorative:t=!0,...i}){return e.jsx(M,{"data-slot":"separator",decorative:t,orientation:o,className:k("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",l),...i})}const G=function(){const o=_(),[t,i]=y.useState(!1),{items:n,getTotalPrice:c,clearCart:p}=D(),{user:r}=I(),j=c(),d=z({defaultValues:{delivery_date:"",delivery_time:"",payment_method:"cash",notes:""},onSubmit:async({value:s})=>{if(!r){x.error("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É");return}if(n.length===0){x.error("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");return}i(!0);try{const a=`${s.delivery_date}T${s.delivery_time}:00`,m={customer:{id:r.id,name:r.name,phone:r.phone,email:r.email,address:r.address},items:n.map(g=>({product_id:parseInt(g.id),quantity:g.quantity})),delivery_date:new Date(s.delivery_date).toISOString(),payment_method:s.payment_method,notes:s.notes},v=await T.create(m);x.success("–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω!",{description:`–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: #${v.id}`}),p(),o({to:"/orders/success",search:{orderId:v.id}})}catch(a){console.error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞:",a),x.error("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑",{description:a.message||"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑"})}finally{i(!1)}}});if(n.length===0)return e.jsx("div",{className:"container mx-auto px-6 py-12",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx(P,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞"}),e.jsx(N,{variant:"gradient",onClick:()=>o({to:"/"}),children:"–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥—É"})]})});const h=new Date;h.setDate(h.getDate()+1);const C=h.toISOString().split("T")[0];return e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"–û—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"–ö–æ–º–ø–∞–Ω–∏—è:"})," ",e.jsx("span",{className:"font-medium",children:r?.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"–¢–µ–ª–µ—Ñ–æ–Ω:"})," ",e.jsx("span",{className:"font-medium",children:r?.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",e.jsx("span",{className:"font-medium",children:r?.email})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(O,{className:"w-4 h-4 mt-0.5 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"font-medium",children:r?.address})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"–î–µ—Ç–∞–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∏"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),d.handleSubmit()},className:"space-y-4",children:[e.jsx(d.Field,{name:"delivery_date",validators:{onChange:({value:s})=>{if(!s)return"–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –¥–æ—Å—Ç–∞–≤–∫–∏";const a=new Date(s),m=new Date;if(m.setHours(0,0,0,0),a<=m)return"–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ - –∑–∞–≤—Ç—Ä–∞"}},children:s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:s.name,children:[e.jsx($,{className:"w-4 h-4 inline mr-2"}),"–î–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ *"]}),e.jsx(B,{id:s.name,name:s.name,type:"date",value:s.state.value,onBlur:s.handleBlur,onChange:a=>s.handleChange(a.target.value),min:C,disabled:t,"aria-invalid":!!s.state.meta.errors.length}),s.state.meta.errors&&e.jsx("p",{className:"text-sm text-destructive",children:s.state.meta.errors[0]})]})}),e.jsx(d.Field,{name:"delivery_time",validators:{onChange:({value:s})=>{if(!s)return"–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏"}},children:s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:s.name,children:[e.jsx(b,{className:"w-4 h-4 inline mr-2"}),"–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ *"]}),e.jsxs("select",{id:s.name,name:s.name,value:s.state.value,onBlur:s.handleBlur,onChange:a=>s.handleChange(a.target.value),disabled:t,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è"}),e.jsx("option",{value:"07:00",children:"07:00 - 08:00"}),e.jsx("option",{value:"08:00",children:"08:00 - 09:00"}),e.jsx("option",{value:"09:00",children:"09:00 - 10:00"}),e.jsx("option",{value:"10:00",children:"10:00 - 11:00"}),e.jsx("option",{value:"11:00",children:"11:00 - 12:00"}),e.jsx("option",{value:"12:00",children:"12:00 - 13:00"}),e.jsx("option",{value:"13:00",children:"13:00 - 14:00"}),e.jsx("option",{value:"14:00",children:"14:00 - 15:00"}),e.jsx("option",{value:"15:00",children:"15:00 - 16:00"}),e.jsx("option",{value:"16:00",children:"16:00 - 17:00"}),e.jsx("option",{value:"17:00",children:"17:00 - 18:00"})]}),s.state.meta.errors&&e.jsx("p",{className:"text-sm text-destructive",children:s.state.meta.errors[0]})]})}),e.jsx(d.Field,{name:"notes",children:s=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:s.name,children:"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É"}),e.jsx("textarea",{id:s.name,name:s.name,value:s.state.value,onBlur:s.handleBlur,onChange:a=>s.handleChange(a.target.value),placeholder:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏...",disabled:t,className:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(u,{className:"text-base",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *"]})}),e.jsx(d.Field,{name:"payment_method",validators:{onChange:({value:s})=>{if(!s)return"–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã"}},children:s=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex items-start gap-4 p-4 border rounded-lg cursor-pointer transition-all ${s.state.value==="cash"?"border-purple-500 bg-purple-500/5 ring-2 ring-purple-500/20":"border-input hover:border-purple-300"}`,children:[e.jsx("input",{type:"radio",name:s.name,value:"cash",checked:s.state.value==="cash",onChange:a=>s.handleChange(a.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:"üíµ"}),e.jsx("span",{className:"font-semibold",children:"–ù–∞–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞"})]})]}),e.jsxs("label",{className:`flex items-start gap-4 p-4 border rounded-lg cursor-pointer transition-all ${s.state.value==="card"?"border-purple-500 bg-purple-500/5 ring-2 ring-purple-500/20":"border-input hover:border-purple-300"}`,children:[e.jsx("input",{type:"radio",name:s.name,value:"card",checked:s.state.value==="card",onChange:a=>s.handleChange(a.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:"üí≥"}),e.jsx("span",{className:"font-semibold",children:"–ö–∞—Ä—Ç–æ–π –Ω–∞ —Å–∞–π—Ç–µ"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–û–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç–∞ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π (Visa, Mastercard)"})]})]}),e.jsxs("label",{className:`flex items-start gap-4 p-4 border rounded-lg cursor-pointer transition-all ${s.state.value==="kaspi"?"border-purple-500 bg-purple-500/5 ring-2 ring-purple-500/20":"border-input hover:border-purple-300"}`,children:[e.jsx("input",{type:"radio",name:s.name,value:"kaspi",checked:s.state.value==="kaspi",onChange:a=>s.handleChange(a.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:"üî¥"}),e.jsx("span",{className:"font-semibold",children:"Kaspi.kz"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Kaspi QR –∏–ª–∏ –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ –Ω–æ–º–µ—Ä"})]})]}),s.state.meta.errors&&e.jsx("p",{className:"text-sm text-destructive",children:s.state.meta.errors[0]})]})})]}),e.jsx(d.Subscribe,{selector:s=>[s.canSubmit,s.isSubmitting],children:([s,a])=>e.jsx(N,{type:"submit",disabled:!s||t||n.length===0,variant:"gradient",size:"lg",className:"w-full",decorative:!0,children:t?"–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ...":`–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ ${j} ‚Ç∏`})})]})]})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"border rounded-lg p-6 sticky top-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"–í–∞—à –∑–∞–∫–∞–∑"}),e.jsx("div",{className:"space-y-3 mb-4",children:n.map(s=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-muted-foreground",children:[s.quantity," √ó ",s.price," ‚Ç∏"]})]}),e.jsxs("p",{className:"font-semibold",children:[s.quantity*s.price," ‚Ç∏"]})]},s.id))}),e.jsx(R,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"–¢–æ–≤–∞—Ä–æ–≤:"}),e.jsx("span",{children:n.length})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"–ò—Ç–æ–≥–æ:"}),e.jsxs("span",{className:"text-foreground",children:[j," ‚Ç∏"]})]})]})]})})]})]})})};export{G as component};
