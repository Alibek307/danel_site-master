import{r as d,b as u,l as x,t as o,j as a,B as i}from"./main-DRxoYVQ_.js";import{u as v,L as n,I as l}from"./useForm-CFfGqZw2.js";function g(){const[t,m]=d.useState(!1),{register:h}=u(),c=x(),r=v({defaultValues:{name:"",phone:"",email:"",password:"",password_confirm:"",address:""},onSubmit:async({value:e})=>{if(e.password!==e.password_confirm){o.error("Пароли не совпадают");return}m(!0);try{await h(e),o.success("Регистрация прошла успешно!"),c.navigate({to:"/"})}catch(s){o.error(s.message||"Ошибка регистрации")}finally{m(!1)}}});return a.jsxs("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),r.handleSubmit()},className:"space-y-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(r.Field,{name:"name",validators:{onChange:({value:e})=>e?e.length<2?"Название должно содержать минимум 2 символа":void 0:"Имя обязательно"},children:e=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:e.name,children:"Имя"}),a.jsx(l,{id:e.name,name:e.name,value:e.state.value,onBlur:e.handleBlur,onChange:s=>e.handleChange(s.target.value),placeholder:"Имя",disabled:t,"aria-invalid":!!e.state.meta.errors.length}),e.state.meta.errors&&a.jsx("p",{className:"text-sm text-destructive",children:e.state.meta.errors[0]})]})}),a.jsx(r.Field,{name:"phone",validators:{onChange:({value:e})=>e?void 0:"Телефон обязателен"},children:e=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:e.name,children:"Телефон"}),a.jsx(l,{id:e.name,name:e.name,type:"tel",value:e.state.value,onBlur:e.handleBlur,onChange:s=>e.handleChange(s.target.value),placeholder:"+7",disabled:t,"aria-invalid":!!e.state.meta.errors.length}),e.state.meta.errors&&a.jsx("p",{className:"text-sm text-destructive",children:e.state.meta.errors[0]})]})}),a.jsx(r.Field,{name:"email",validators:{onChange:({value:e})=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?void 0:"Неверный формат email":"Email обязателен"},children:e=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:e.name,children:"Email"}),a.jsx(l,{id:e.name,name:e.name,type:"email",value:e.state.value,onBlur:e.handleBlur,onChange:s=>e.handleChange(s.target.value),placeholder:"your@email.com",disabled:t,"aria-invalid":!!e.state.meta.errors.length}),e.state.meta.errors&&a.jsx("p",{className:"text-sm text-destructive",children:e.state.meta.errors[0]})]})}),a.jsx(r.Field,{name:"password",validators:{onChange:({value:e})=>e?e.length<8?"Пароль должен содержать минимум 8 символов":void 0:"Пароль обязателен"},children:e=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:e.name,children:"Пароль"}),a.jsx(l,{id:e.name,name:e.name,type:"password",value:e.state.value,onBlur:e.handleBlur,onChange:s=>e.handleChange(s.target.value),placeholder:"••••••••",disabled:t,"aria-invalid":!!e.state.meta.errors.length}),e.state.meta.errors&&a.jsx("p",{className:"text-sm text-destructive",children:e.state.meta.errors[0]})]})}),a.jsx(r.Field,{name:"password_confirm",validators:{onChange:({value:e})=>e?void 0:"Подтвердите пароль"},children:e=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:e.name,children:"Повторите пароль"}),a.jsx(l,{id:e.name,name:e.name,type:"password",value:e.state.value,onBlur:e.handleBlur,onChange:s=>e.handleChange(s.target.value),placeholder:"••••••••",disabled:t,"aria-invalid":!!e.state.meta.errors.length}),e.state.meta.errors&&a.jsx("p",{className:"text-sm text-destructive",children:e.state.meta.errors[0]})]})}),a.jsx(r.Field,{name:"address",validators:{onChange:({value:e})=>e?void 0:"Адрес обязателен"},children:e=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:e.name,children:"Адрес"}),a.jsx(l,{id:e.name,name:e.name,value:e.state.value,onBlur:e.handleBlur,onChange:s=>e.handleChange(s.target.value),placeholder:"г. Алматы, ул. Абая 123",disabled:t,"aria-invalid":!!e.state.meta.errors.length}),e.state.meta.errors&&a.jsx("p",{className:"text-sm text-destructive",children:e.state.meta.errors[0]})]})})]}),a.jsx(r.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:([e,s])=>a.jsx(i,{type:"submit",disabled:!e||t,className:"w-full",size:"lg",children:t?"Регистрция...":"Зарегистрироваться"})}),a.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Уже есть аккаунт?"," ",a.jsx(i,{type:"button",variant:"link",className:"p-0 h-auto",onClick:()=>c.navigate({to:"/auth/login"}),children:"Войти"})]})]})}const N=function(){return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:a.jsx("div",{className:"max-w-md w-full mx-4",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Регистрация"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Создайте аккаунт для оформления заказов"})]}),a.jsx(g,{})]})})})};export{N as component};
