import{j as e,G as u,d as g,a as h,e as f,f as p,r as j,g as N,t as C}from"./main-CCPV2-vA.js";import{C as v,a as b}from"./card-D9YP67Ot.js";function w({product:n,onAddToCart:i}){const r=()=>{i?.(n.id)};return e.jsxs(v,{className:"w-full max-w-sm mx-auto overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-48 object-cover",loading:"lazy"})}),e.jsxs(b,{className:"p-4 flex flex-col h-full",children:[e.jsx("h3",{className:"font-semibold text-lg text-center",children:n.name}),e.jsx("div",{className:"flex-1 py-2",children:e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:n.ingredients.join(", ")})}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"text-xl font-bold text-foreground",children:[n.price," ₸"]}),e.jsxs(u,{onClick:r,variant:"gradient",size:"default",decorative:!0,children:[e.jsx(g,{className:"w-4 h-4"}),"Добавить"]})]})]})]})}const S=function(){const i=h(t=>t.addItem),{data:r=[],isLoading:d}=f(),{data:o=[],isLoading:c}=p(),l=j.useMemo(()=>{const t={};return r.forEach(s=>{t[s.id]=o.filter(a=>a.category===s.id).map(N)}),t},[r,o]),m=t=>{const s=o.find(a=>a.id===t);s&&(i({id:s.id.toString(),name:s.name,price:parseFloat(s.price),image:s.image||""}),C.success(`${s.name} добавлен в корзину!`,{description:`Цена: ${parseFloat(s.price)} ₸`,duration:3e3,action:{label:"Открыть корзину",onClick:()=>{document.querySelector("[data-cart-trigger]")?.click()}}}))};if(d||c)return e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsx("div",{className:"text-center",children:"Загрузка..."})});const x=t=>{const s=l[t.id]||[];return s.length===0?null:e.jsxs("section",{id:`category-${t.id}`,className:"mb-12 scroll-mt-28",children:[e.jsx("h2",{className:"text-2xl font-bold mb-8",children:t.name}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(a=>e.jsx(w,{product:a,onAddToCart:()=>m(a.id)},a.id))})]},t.id)};return e.jsx("div",{className:"container mx-auto px-6 py-2 space-y-8",children:r.map(x)})};export{S as component};
