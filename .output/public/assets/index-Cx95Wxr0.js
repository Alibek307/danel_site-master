import{j as e,G as g,d as f,c as i,a as h,e as p,f as j,r as N,g as v,t as C}from"./main-DRxoYVQ_.js";function b({product:s,onAddToCart:r}){const o=()=>{r?.(s.id)};return e.jsxs(w,{className:"w-full max-w-sm mx-auto overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover",loading:"lazy"})}),e.jsxs(y,{className:"p-4 flex flex-col h-full",children:[e.jsx("h3",{className:"font-semibold text-lg text-center",children:s.name}),e.jsx("div",{className:"flex-1 py-2",children:e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s.ingredients.join(", ")})}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"text-xl font-bold text-foreground",children:[s.price," ₸"]}),e.jsxs(g,{onClick:o,variant:"gradient",size:"default",decorative:!0,children:[e.jsx(f,{className:"w-4 h-4"}),"Добавить"]})]})]})]})}function w({className:s,...r}){return e.jsx("div",{"data-slot":"card",className:i("bg-card text-card-foreground flex flex-col gap-1 rounded-xl border py-4 shadow-sm",s),...r})}function y({className:s,...r}){return e.jsx("div",{"data-slot":"card-content",className:i("px-6",s),...r})}const S=function(){const r=h(t=>t.addItem),{data:o=[],isLoading:c}=p(),{data:d=[],isLoading:l}=j(),m=N.useMemo(()=>{const t={};return o.forEach(a=>{t[a.id]=d.filter(n=>n.category===a.id).map(v)}),t},[o,d]),x=t=>{const a=d.find(n=>n.id===t);a&&(r({id:a.id.toString(),name:a.name,price:parseFloat(a.price),image:a.image||""}),C.success(`${a.name} добавлен в корзину!`,{description:`Цена: ${parseFloat(a.price)} ₸`,duration:3e3,action:{label:"Открыть корзину",onClick:()=>{document.querySelector("[data-cart-trigger]")?.click()}}}))};if(c||l)return e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsx("div",{className:"text-center",children:"Загрузка..."})});const u=t=>{const a=m[t.id]||[];return a.length===0?null:e.jsxs("section",{id:`category-${t.id}`,className:"mb-12 scroll-mt-28",children:[e.jsx("h2",{className:"text-2xl font-bold mb-8",children:t.name}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(n=>e.jsx(b,{product:n,onAddToCart:()=>x(n.id)},n.id))})]},t.id)};return e.jsx("div",{className:"container mx-auto px-6 py-2 space-y-8",children:o.map(u)})};export{S as component};
