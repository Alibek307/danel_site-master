import{r as u,b as h,l as x,t as i,j as s,B as o}from"./main-DRxoYVQ_.js";import{u as g,L as m,I as c}from"./useForm-CFfGqZw2.js";function p(){const[t,n]=u.useState(!1),{login:d}=h(),l=x(),r=g({defaultValues:{email:"",password:""},onSubmit:async({value:e})=>{n(!0);try{await d(e.email,e.password),i.success("Успешный вход в систему!"),l.navigate({to:"/"})}catch(a){i.error(a.message||"Ошибка входа в систему")}finally{n(!1)}}});return s.jsxs("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),r.handleSubmit()},className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(r.Field,{name:"email",validators:{onChange:({value:e})=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?void 0:"Неверный формат email":"Email обязателен"},children:e=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:e.name,children:"Email"}),s.jsx(c,{id:e.name,name:e.name,type:"email",value:e.state.value,onBlur:e.handleBlur,onChange:a=>e.handleChange(a.target.value),placeholder:"your@email.com",disabled:t,"aria-invalid":!!e.state.meta.errors.length}),e.state.meta.errors&&s.jsx("p",{className:"text-sm text-destructive",children:e.state.meta.errors[0]})]})}),s.jsx(r.Field,{name:"password",validators:{onChange:({value:e})=>e?e.length<6?"Пароль должен содержать минимум 6 символов":void 0:"Пароль обязателен"},children:e=>s.jsxs("div",{className:"space",children:[s.jsx(m,{htmlFor:e.name,children:"Пароль"}),s.jsx(c,{id:e.name,name:e.name,type:"password",value:e.state.value,onBlur:e.handleBlur,onChange:a=>e.handleChange(a.target.value),placeholder:"••••••••",disabled:t,"aria-invalid":!!e.state.meta.errors.length}),e.state.meta.errors&&s.jsx("p",{className:"text-sm text-destructive",children:e.state.meta.errors[0]})]})})]}),s.jsx(r.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:([e,a])=>s.jsx(o,{type:"submit",disabled:!e||t,className:"w-full",size:"lg",children:t?"Вход...":"Войти"})}),s.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Нет аккаунта?"," ",s.jsx(o,{type:"button",variant:"link",className:"p-0 h-auto",onClick:()=>l.navigate({to:"/auth/register"}),children:"Зарегистрироваться"})]})]})}const b=function(){return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx("div",{className:"max-w-md w-full mx-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Вход"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Войдите в свой аккаунт"})]}),s.jsx(p,{})]})})})};export{b as component};
