import{r as y,j as e,P as k,c as _,u as D,a as P,b as T,S as $,G as b,U as L,M as z,t as p,o as F}from"./main-CCPV2-vA.js";import{u as I,L as h}from"./useForm-CcPXm2vi.js";import{C as N,a as E}from"./clock-BNKicMoG.js";var M="Separator",f="horizontal",O=["horizontal","vertical"],w=y.forwardRef((o,d)=>{const{decorative:r,orientation:i=f,...n}=o,m=A(i)?i:f,t=r?{role:"none"}:{"aria-orientation":m==="vertical"?m:void 0,role:"separator"};return e.jsx(k.div,{"data-orientation":m,...t,...n,ref:d})});w.displayName=M;function A(o){return O.includes(o)}var B=w;function R({className:o,orientation:d="horizontal",decorative:r=!0,...i}){return e.jsx(B,{"data-slot":"separator",decorative:r,orientation:d,className:_("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",o),...i})}const K=function(){const d=D(),[r,i]=y.useState(!1),{items:n,getTotalPrice:m,clearCart:g}=P(),{user:t}=T(),v=m(),c=I({defaultValues:{delivery_date:"",delivery_time:"",payment_method:"cash",notes:""},onSubmit:async({value:s})=>{if(!t){p.error("ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð²Ð¾Ð¹Ñ‚Ð¸ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ");return}if(n.length===0){p.error("ÐšÐ¾Ñ€Ð·Ð¸Ð½Ð° Ð¿ÑƒÑÑ‚Ð°");return}i(!0);try{const a=`${s.delivery_date}T${s.delivery_time}:00`,l={customer:t?{id:t.id}:void 0,items:n.map(u=>({product_id:Number(u.id),quantity:u.quantity,price:u.price.toString()})),delivery_date:a,payment_method:s.payment_method,notes:s.notes},x=await F.create(l);p.success("Ð—Ð°ÐºÐ°Ð· ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½!",{description:`ÐÐ¾Ð¼ÐµÑ€ Ð·Ð°ÐºÐ°Ð·Ð°: #${x.id}`}),g(),d({to:"/orders/success",search:{orderId:x.id}})}catch(a){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð°:",a),p.error("ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·",{description:a.message||"ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ðµ Ñ€Ð°Ð·"})}finally{i(!1)}}});if(n.length===0)return e.jsx("div",{className:"container mx-auto px-6 py-12",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx($,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"ÐšÐ¾Ñ€Ð·Ð¸Ð½Ð° Ð¿ÑƒÑÑ‚Ð°"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹ Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ Ð´Ð»Ñ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð°"}),e.jsx(b,{variant:"gradient",onClick:()=>d({to:"/"}),children:"ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ñƒ"})]})});const j=new Date;return j.setDate(j.getDate()+1),j.toISOString().split("T")[0],e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"ÐžÑ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð°"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¸"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ÐšÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ñ:"})," ",e.jsx("span",{className:"font-medium",children:t?.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½:"})," ",e.jsx("span",{className:"font-medium",children:t?.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",e.jsx("span",{className:"font-medium",children:t?.email})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(z,{className:"w-4 h-4 mt-0.5 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"font-medium",children:t?.address})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Ð”ÐµÑ‚Ð°Ð»Ð¸ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),c.handleSubmit()},className:"space-y-4",children:[e.jsx(c.Field,{name:"delivery_date",validators:{onChange:({value:s})=>{if(!s)return"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´Ð°Ñ‚Ñƒ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸"}},children:s=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs(h,{children:[e.jsx(E,{className:"w-4 h-4 inline mr-2"}),"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´Ð°Ñ‚Ñƒ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ *"]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5].map(a=>{const l=new Date;l.setDate(l.getDate()+a);const x=l.toISOString().split("T")[0],u=a===1?"Ð—Ð°Ð²Ñ‚Ñ€Ð°":l.getDate().toString(),C=["ÑÐ½Ð²","Ñ„ÐµÐ²","Ð¼Ð°Ñ€","Ð°Ð¿Ñ€","Ð¼Ð°Ð¹","Ð¸ÑŽÐ½","Ð¸ÑŽÐ»","Ð°Ð²Ð³","ÑÐµÐ½","Ð¾ÐºÑ‚","Ð½Ð¾Ñ","Ð´ÐµÐº"][l.getMonth()],S=s.state.value===x;return e.jsxs("button",{type:"button",onClick:()=>s.handleChange(x),disabled:r,className:`flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all ${S?"border-purple-500 bg-purple-500/10 ring-2 ring-purple-500/20":"border-input hover:border-purple-300 hover:bg-accent"} ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:C}),e.jsx("span",{className:"text-lg font-semibold",children:u})]},a)})}),s.state.meta.errors&&e.jsx("p",{className:"text-sm text-destructive",children:s.state.meta.errors[0]})]})}),e.jsx(c.Field,{name:"delivery_time",validators:{onChange:({value:s})=>{if(!s)return"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸"}},children:s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{htmlFor:s.name,children:[e.jsx(N,{className:"w-4 h-4 inline mr-2"}),"Ð’Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ *"]}),e.jsxs("select",{id:s.name,name:s.name,value:s.state.value,onBlur:s.handleBlur,onChange:a=>s.handleChange(a.target.value),disabled:r,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²Ñ€ÐµÐ¼Ñ"}),e.jsx("option",{value:"07:00",children:"07:00 - 08:00"}),e.jsx("option",{value:"08:00",children:"08:00 - 09:00"}),e.jsx("option",{value:"09:00",children:"09:00 - 10:00"}),e.jsx("option",{value:"10:00",children:"10:00 - 11:00"}),e.jsx("option",{value:"11:00",children:"11:00 - 12:00"}),e.jsx("option",{value:"12:00",children:"12:00 - 13:00"}),e.jsx("option",{value:"13:00",children:"13:00 - 14:00"}),e.jsx("option",{value:"14:00",children:"14:00 - 15:00"}),e.jsx("option",{value:"15:00",children:"15:00 - 16:00"}),e.jsx("option",{value:"16:00",children:"16:00 - 17:00"}),e.jsx("option",{value:"17:00",children:"17:00 - 18:00"})]}),s.state.meta.errors&&e.jsx("p",{className:"text-sm text-destructive",children:s.state.meta.errors[0]})]})}),e.jsx(c.Field,{name:"notes",children:s=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:s.name,children:"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹ Ðº Ð·Ð°ÐºÐ°Ð·Ñƒ"}),e.jsx("textarea",{id:s.name,name:s.name,value:s.state.value,onBlur:s.handleBlur,onChange:a=>s.handleChange(a.target.value),placeholder:"Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð¶ÐµÐ»Ð°Ð½Ð¸Ñ Ð¸Ð»Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸...",disabled:r,className:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(h,{className:"text-base",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Ð¡Ð¿Ð¾ÑÐ¾Ð± Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ *"]})}),e.jsx(c.Field,{name:"payment_method",validators:{onChange:({value:s})=>{if(!s)return"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ¿Ð¾ÑÐ¾Ð± Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹"}},children:s=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex items-start gap-4 p-4 border rounded-lg cursor-pointer transition-all ${s.state.value==="cash"?"border-purple-500 bg-purple-500/5 ring-2 ring-purple-500/20":"border-input hover:border-purple-300"}`,children:[e.jsx("input",{type:"radio",name:s.name,value:"cash",checked:s.state.value==="cash",onChange:a=>s.handleChange(a.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ’µ"}),e.jsx("span",{className:"font-semibold",children:"ÐÐ°Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð½Ð°Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸ Ð¿Ñ€Ð¸ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐµ Ð·Ð°ÐºÐ°Ð·Ð°"})]})]}),e.jsxs("label",{className:`flex items-start gap-4 p-4 border rounded-lg cursor-pointer transition-all ${s.state.value==="card"?"border-purple-500 bg-purple-500/5 ring-2 ring-purple-500/20":"border-input hover:border-purple-300"}`,children:[e.jsx("input",{type:"radio",name:s.name,value:"card",checked:s.state.value==="card",onChange:a=>s.handleChange(a.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ’³"}),e.jsx("span",{className:"font-semibold",children:"ÐšÐ°Ñ€Ñ‚Ð¾Ð¹ Ð½Ð° ÑÐ°Ð¹Ñ‚Ðµ"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ÐžÐ½Ð»Ð°Ð¹Ð½ Ð¾Ð¿Ð»Ð°Ñ‚Ð° Ð±Ð°Ð½ÐºÐ¾Ð²ÑÐºÐ¾Ð¹ ÐºÐ°Ñ€Ñ‚Ð¾Ð¹ (Visa, Mastercard)"})]})]}),e.jsxs("label",{className:`flex items-start gap-4 p-4 border rounded-lg cursor-pointer transition-all ${s.state.value==="kaspi"?"border-purple-500 bg-purple-500/5 ring-2 ring-purple-500/20":"border-input hover:border-purple-300"}`,children:[e.jsx("input",{type:"radio",name:s.name,value:"kaspi",checked:s.state.value==="kaspi",onChange:a=>s.handleChange(a.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ”´"}),e.jsx("span",{className:"font-semibold",children:"Kaspi.kz"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ÐžÐ¿Ð»Ð°Ñ‚Ð° Ñ‡ÐµÑ€ÐµÐ· Kaspi QR Ð¸Ð»Ð¸ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´ Ð½Ð° Ð½Ð¾Ð¼ÐµÑ€"})]})]}),s.state.meta.errors&&e.jsx("p",{className:"text-sm text-destructive",children:s.state.meta.errors[0]})]})})]}),e.jsx(c.Subscribe,{selector:s=>[s.canSubmit,s.isSubmitting],children:([s,a])=>e.jsx(b,{type:"submit",disabled:!s||r||n.length===0,variant:"gradient",size:"lg",className:"w-full",decorative:!0,children:r?"ÐžÑ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ðµ...":`ÐžÑ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ð½Ð° ${v} â‚¸`})})]})]})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"border rounded-lg p-6 sticky top-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Ð’Ð°Ñˆ Ð·Ð°ÐºÐ°Ð·"}),e.jsx("div",{className:"space-y-3 mb-4",children:n.map(s=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-muted-foreground",children:[s.quantity," Ã— ",s.price," â‚¸"]})]}),e.jsxs("p",{className:"font-semibold",children:[s.quantity*s.price," â‚¸"]})]},s.id))}),e.jsx(R,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ð¢Ð¾Ð²Ð°Ñ€Ð¾Ð²:"}),e.jsx("span",{children:n.length})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Ð˜Ñ‚Ð¾Ð³Ð¾:"}),e.jsxs("span",{className:"text-foreground",children:[v," â‚¸"]})]})]})]})})]})]})})};export{K as component};
